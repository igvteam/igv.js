<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>SVG Dev</title>

    <link href="css/dev.css" rel="stylesheet"/>
    <link href="css/save_to_svg.css" rel="stylesheet"/>

    <style>
        #trackList {

            border-color: rgb(127, 127, 127);
            border-style: solid;
            border-width: thin;

            width: 480px;
            height: 256px;
            overflow-y: auto;
        }

        div#trackList > div, div#myDiv > h3 {

            font-family: 'PT Sans', sans-serif;
            font-size: small;
            font-weight: 400;

            color: #444;
            margin-left: 16px;
            margin-top: 4px;
            margin-bottom: 4px;

            padding-left: 32px;
        }

        div#myDiv > h3 {
            font-size: large;
        }

        div#trackList > div:hover,
        div#trackList > div:focus,
        div#trackList > div:active {
            cursor: pointer;
            color: white;
            background-color: rgba(49, 106, 246, 1);
        }

    </style>

</head>

<body>

<div id="igv-centering-container">
    <div id='igv-app-container'></div>
</div>

<div id='igv-draw-svg-button-container'>
    <button id='igv-draw-svg-button' type="button">
        <label>Draw SVG</label>
    </button>
</div>

<div id="igv-svg-container">
</div>

</body>

<script type="module">

    import $ from '../js/vendor/jquery-3.3.1.slim.js'
    import igv from '../js/index.js'

    (async () => {

        const bedgraph_options = {
            locus: '19:49301000-49305700',
            genome: "hg19",
            tracks: [
                {
                    name: 'All negative points',
                    url: '../test/data/wig/allNegativewig.bedgraph',
                    indexed: false,
                    graphType: "points",
                    guideLines:
                        [
                            {dotted: true, y: 0, color: "green"},
                            {dotted: true, y: -0.25, color: "blue"},
                            {dotted: true, y: -0.5, color: "red"}
                        ]
                },
                {
                    name: 'All negative bars',
                    url: '../test/data/wig/allNegativewig.bedgraph',
                    indexed: false
                },
                {
                    name: 'Mixed_pos_neg_points',
                    url: '../test/data/wig/mixedPosNeg.bedgraph',
                    indexed: false,
                    graphType: "points",
                    guideLines:
                        [
                            {dotted: true, y: 0, color: "green"},
                            {dotted: true, y: -0.5, color: "blue"},
                            {dotted: true, y: 0.5, color: "red"}
                        ]
                },
                {
                    name: 'Mixed pos neg bars',
                    url: '../test/data/wig/mixedPosNeg.bedgraph',
                    indexed: false
                },
                {
                    name: 'All pos points',
                    url: '../test/data/wig/allPositive.bedgraph',
                    indexed: false,
                    graphType: "points",
                    guideLines:
                        [
                            {dotted: true, y: 0, color: "green"},
                            {dotted: true, y: 0.25, color: "blue"},
                            {dotted: true, y: 0.5, color: "red"}
                        ]
                },
                {
                    name: 'All pos bars',
                    url: '../test/data/wig/allPositive.bedgraph',
                    indexed: false
                }
            ]
        };

        const options =
            {
                genome: "hg19",
                showSVGButton: false,
                // showTrackLabels: false,
                // sampleNameViewportWidth: 512,
                locus: '17',
                tracks:
                    [
                        {
                            "url": "https://s3-us-west-2.amazonaws.com/ilmn.igv-test/test2.bigWig",
                            "name": "Big BigWig"
                        },
                        {
                            name: "A SEG Track",
                            url: "https://data.broadinstitute.org/igvdata/test/igv-web/segmented_data_080520.seg.gz",
                            indexed: false,
                            isLog: true,
                            displayMode: 'EXPANDED',
                            height: 256

                        },
                        // {
                        //     "sourceType": "gcs",
                        //     "type": "alignment",
                        //     "url": "gs://genomics-public-data/platinum-genomes/bam/NA12891_S1.bam",
                        //     "indexURL": "gs://genomics-public-data/platinum-genomes/bam/NA12891_S1.bam.bai",
                        //     "name": "NA12891"
                        // }
                    ]
            }

        const browser = await igv.createBrowser(document.getElementById('igv-app-container'), bedgraph_options)

        $('#igv-draw-svg-button').on('click', () => browser.renderSVG($('#igv-svg-container')))


    })()

</script>
</html>
