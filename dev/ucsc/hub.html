<!DOCTYPE html>
<html lang="en">
<head>
    <title>twobit</title>
</head>

<body>

<label>
    Enter full URL to hub.txt file
    <input id="hub-input" type="text" style="width: 600px" value="https://hgdownload.soe.ucsc.edu/hubs/GCF/000/186/305/GCF_000186305.1/hub.txt">
</label>

<button id="load-genome">Load hub as genome</button>
<button id="load-session">Load hub as session</button>

<div id="igvDiv" style="padding-top: 50px;padding-bottom: 20px; height: auto"></div>

<script type="module">

    import igv from "../../js/index.js"
    import Hub from "../../js/ucsc/ucscHub.js"

    // Many chromosomes  https://hgdownload.soe.ucsc.edu/hubs/GCF/000/186/305/GCF_000186305.1/hub.txt
    // 24 chromosomes  https://hgdownload.soe.ucsc.edu/hubs/GCF/013/103/735/GCF_013103735.1/hub.txt

    const hubOptions = {
        url: "https://hgdownload.soe.ucsc.edu/hubs/GCF/000/186/305/GCF_000186305.1/hub.txt",
        includeTracks: "all"
    }


    const hub = await Hub.loadHub(hubOptions)
    const ref = hub.getGenomeConfig()
    ref.tracks.push({
        name: "plain wig",
        type: "wig",
        format: "wig",
        min: 30,
        max: 70,
        autoscale: false,
        color: "rgb(0,0,0)",
        height: 36,
        url: "GCF_000186305.1_Python_molurus_bivittatus-5.0.2.wig"
    })

    const igvConfig = {
        locus: hub.getDefaultPosition(),
        reference: ref
    }

    const browser = await igv.createBrowser(document.getElementById('igvDiv'), igvConfig)

    document.getElementById("load-genome").addEventListener("click", () =>
        browser.loadGenome({url: document.getElementById("hub-input").value}))
    document.getElementById("load-session").addEventListener("click", () =>
        browser.loadSession({url: document.getElementById("hub-input").value}))


</script>

</body>

</html>
