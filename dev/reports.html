<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="https://igv.org/web/img/favicon.ico">

    <title>IGV Variant Inspector </title>

    <!-- igv -->


    <!-- IGV CSS -->
    <link rel="stylesheet" type="text/css" href="../css/igv.css"/>
    <link rel="stylesheet" type="text/css" href="css/dev.css"/>

    <!-- Vendor CSS -->
    <link rel="stylesheet" type="text/css" href="../vendor/fa-svg-with-js.css"/>

    <script src="js/dev.js"></script>

    <!-- Vendor JS -->
    <script src="../vendor/jquery-3.3.1.slim.js"></script>
    <script src="../vendor/underscore.js"></script>

    <script src="../vendor/zlib_and_gzip.js"></script>
    <script src="../vendor/inflate.js"></script>

    <!-- IGV JS -->
    <script src="../js/igv-icons.js"></script>
    <script src="../js/session/igvXmlSession.js"></script>
    <script src="../js/feature/mergedTrack.js"></script>



    <script src="../js/bam/bamReader.js"></script>
    <script src="../js/bam/bamReaderNonIndexed.js"></script>
    <script src="../js/bam/bgzf.js"></script>
    <script src="../js/bam/bamSource.js"></script>
    <script src="../js/bam/bamTrack.js"></script>
    <script src="../js/bam/bamAlignment.js"></script>
    <script src="../js/bam/bamAlignmentRow.js"></script>
    <script src="../js/bam/bamIndex.js"></script>
    <script src="../js/bam/alignmentContainer.js"></script>
    <script src="../js/bam/pairedAlignment.js"></script>
    <script src="../js/bam/bamUtils.js"></script>
    <script src="../js/bam/bamWebserviceReader.js"></script>
    <script src="../js/bam/htsgetReader.js"></script>
    <script src="../js/bam/alignmentBlock.js"></script>
    <script src="../js/bam/shardedBamReader.js"></script>

    <script src="../js/bigQuery/ccp.js"></script>

    <script src="../js/bigwig/bufferedReader.js"></script>
    <script src="../js/bigwig/bwReader.js"></script>
    <script src="../js/bigwig/bwSource.js"></script>


    <script src="../js/feature/featureCache.js"></script>
    <script src="../js/feature/gffHelper.js"></script>
    <script src="../js/feature/featureSource.js"></script>
    <script src="../js/feature/featureParsers.js"></script>
    <script src="../js/feature/tribble.js"></script>
    <script src="../js/feature/featureFileReader.js"></script>
    <script src="../js/feature/customServiceReader.js"></script>


    <script src="../js/feature/featureTrack.js"></script>
    <script src="../js/feature/wigTrack.js"></script>
    <script src="../js/feature/featureUtils.js"></script>
    <script src="../js/feature/segParser.js"></script>
    <script src="../js/feature/segTrack.js"></script>
    <script src="../js/feature/dataWrapper.js"></script>
    <script src="../js/feature/interactionTrack.js"></script>
    <script src="../js/rna/rnaStruct.js"></script>
    <script src="../js/feature/ucscServiceReader.js"></script>

    <script src="../js/ga4gh/ga4ghAlignmentReader.js"></script>
    <script src="../js/ga4gh/ga4ghVariantReader.js"></script>
    <script src="../js/ga4gh/ga4ghHelper.js"></script>
    <script src="../js/ga4gh/googleUtils.js"></script>
    <script src="../js/oauth.js"></script>

    <script src="../js/gtex/eqtlTrack.js"></script>
    <script src="../js/gtex/gtexReader.js"></script>
    <script src="../js/gtex/gtex.js"></script>
    <script src="../js/gtex/immvarReader.js"></script>

    <script src="../js/gwas/t2dVariantSource.js"></script>
    <script src="../js/gwas/gwasTrack.js"></script>

    <script src="../js/tdf/tdfReader.js"></script>
    <script src="../js/tdf/tdfSource.js"></script>

    <script src="../js/ui/draggable.js"></script>
    <script src="../js/ui/trackMenuPopupDialog.js"></script>
    <script src="../js/ui/dataRangeDialog.js"></script>
    <script src="../js/ui/inputDialog.js"></script>
    <script src="../js/ui/trackRemovalDialog.js"></script>
    <script src="../js/ui/alertDialog.js"></script>
    <script src="../js/ui/cursorGuide.js"></script>
    <script src="../js/ui/centerGuide.js"></script>
    <script src="../js/ui/trackLabelControl.js"></script>
    <script src="../js/ui/userFeedback.js"></script>
    <script src="../js/ui/alertDialog.js"></script>
    <script src="../js/ui/popover.js"></script>
    <script src="../js/ui/chromosomeSelectWidget.js"></script>
    <script src="../js/ui/zoomWidget.js"></script>

    <script src="../js/variant/vcfParser.js"></script>
    <script src="../js/variant/variant.js"></script>
    <script src="../js/variant/variantTrack.js"></script>

    <script src="../js/sampleInformation.js"></script>
    <script src="../js/igv-create.js"></script>
    <script src="../js/browser.js"></script>
    <script src="../js/ideogram.js"></script>
    <script src="../js/windowSizePanel.js"></script>
    <script src="../js/referenceFrame.js"></script>
    <script src="../js/igv-canvas.js"></script>
    <script src="../js/genome.js"></script>
    <script src="../js/trackView.js"></script>
    <script src="../js/viewport.js"></script>
    <script src="../js/ui/genericContainer.js"></script>
    <script src="../js/ui/trackGearPopover.js"></script>
    
    <script src="../js/rulerTrack.js"></script>
    <script src="../js/rulerSweeper.js"></script>

    <script src="../js/igv-math.js"></script>
    <script src="../js/igv-color.js"></script>
    <script src="../js/igv-utils.js"></script>
    <script src="../js/parseUtils.js"></script>
    <script src="../js/fasta.js"></script>
    <script src="../js/sequenceTrack.js"></script>


    <script src="../js/igvxhr.js"></script>
    <script src="../js/binary.js"></script>

    <script src="../js/intervalTree.js"></script>

    <script src="../js/trackCore.js"></script>
    <script src="../js/trackBase.js"></script>

    <script src="../js/roi.js"></script>
    <script src="../js/roiSource.js"></script>
    <script src="../js/civic/civicReader.js"></script>

    <script src="../js/feature/fileFormats.js"></script>

    <script src="../vendor/tdigest.js"></script>
    <script src="../vendor/rbtree.js"></script>
    <script src="../js/canvas2svg.js"></script>


    <!-- selector table style -->
    <style>
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: lightblue;
        }

        th {
            background-color: lightskyblue;
            color: white;
        }
    </style>

    <style type="text/css">
        body {
            font-size: 80%;
            font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
        }

        ul#tabs {
            list-style-type: none;
            margin: 30px 0 0 0;
            padding: 0 0 0.3em 0;
        }

        ul#tabs li {
            display: inline;
        }

        ul#tabs li a {
            color: #42454a;
            background-color: #dedbde;
            border: 1px solid #c9c3ba;
            border-bottom: none;
            padding: 0.3em;
            text-decoration: none;
        }

        ul#tabs li a:hover {
            background-color: #f1f0ee;
        }

        ul#tabs li a.selected {
            color: #000;
            background-color: #f1f0ee;
            font-weight: bold;
            padding: 0.7em 0.3em 0.38em 0.3em;
        }

        div.tabContent {
            border: 1px solid #c9c3ba;
            padding: 0.5em;
        }

        div.tabContent.hide {
            display: none;
        }
    </style>

</head>

<body>


<ul id="tabs">
    <li><a href="#firstTab">Variant Table</a></li>
    <li><a href="#igvTab">IGV View</a></li>
</ul>

<div id="firstTab">
    <div id="tableSelectorDiv" style="overflow: auto"></div>
</div>

<div id="igvTab">
    <div id="igvDiv"></div>
</div>


<script type="text/javascript">

    var tableJson = [
        {
            "ALT": "G",
            "CHASM_FDR": "0.3",
            "CHASM_PVALUE": "0.1114",
            "CHROM": "chr5",
            "COSMIC_ID": "COSM4006021",
            "DP": "4",
            "GENE": "LOC100288152,SLC9A3",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "474989",
            "QUAL": "96.03",
            "REF": "A",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "urinary_tract",
            "TUMOR": "carcinoma_--_NS",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.96802"
        },
        {
            "ALT": "A",
            "CHASM_FDR": "0.3",
            "CHASM_PVALUE": "0.0694",
            "CHROM": "chr5",
            "COSMIC_ID": "NA",
            "DP": "45",
            "GENE": "TRIM41",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "181224474",
            "QUAL": "375.77",
            "REF": "G",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "NA",
            "TUMOR": "NA",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.48052"
        },
        {
            "ALT": "A",
            "CHASM_FDR": "0.2",
            "CHASM_PVALUE": "0.0344",
            "CHROM": "chr8",
            "COSMIC_ID": "COSM3750086",
            "DP": "66",
            "GENE": "PLEC",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "143923759",
            "QUAL": "878.77",
            "REF": "G",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "large_intestine",
            "TUMOR": "carcinoma_--_adenocarcinoma",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.84202"
        },
        {
            "ALT": "A",
            "CHASM_FDR": "0.3",
            "CHASM_PVALUE": "0.0744",
            "CHROM": "chr12",
            "COSMIC_ID": "COSM3753397",
            "DP": "48",
            "GENE": "TIMELESS",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "56420869",
            "QUAL": "392.77",
            "REF": "G",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "large_intestine",
            "TUMOR": "carcinoma_--_adenocarcinoma",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.18439"
        },
        {
            "ALT": "T",
            "CHASM_FDR": "0.05",
            "CHASM_PVALUE": "0",
            "CHROM": "chr17",
            "COSMIC_ID": "COSM3717625",
            "DP": "61",
            "GENE": "TP53",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "7673767",
            "QUAL": "2000.77",
            "REF": "C",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "bone",
            "TUMOR": "Ewings_sarcoma-peripheral_primitive_neuroectodermal_tumour_--_NS",
            "VEST_FDR": "0.3",
            "VEST_PVALUE": "0.01447"
        },
        {
            "ALT": "C",
            "CHASM_FDR": "0.3",
            "CHASM_PVALUE": "0.087",
            "CHROM": "chr17",
            "COSMIC_ID": "COSM3766193",
            "DP": "80",
            "GENE": "TP53",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "7676154",
            "QUAL": "2150.77",
            "REF": "G",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "haematopoietic_and_lymphoid_tissue",
            "TUMOR": "haematopoietic_neoplasm_--_acute_myeloid_leukaemia",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.52717"
        },
        {
            "ALT": "C",
            "CHASM_FDR": "0.2",
            "CHASM_PVALUE": "0.0372",
            "CHROM": "chr17",
            "COSMIC_ID": "COSM3755560",
            "DP": "4",
            "GENE": "BRCA1",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "43071077",
            "QUAL": "97.03",
            "REF": "T",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "haematopoietic_and_lymphoid_tissue",
            "TUMOR": "haematopoietic_neoplasm_--_acute_myeloid_leukaemia",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.3446"
        },
        {
            "ALT": "C",
            "CHASM_FDR": "0.05",
            "CHASM_PVALUE": "0.0002",
            "CHROM": "chr17",
            "COSMIC_ID": "COSM3755561",
            "DP": "4",
            "GENE": "BRCA1",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "43091983",
            "QUAL": "89.03",
            "REF": "T",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "soft_tissue",
            "TUMOR": "haemangioblastoma_--_NS",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.64447"
        },
        {
            "ALT": "A",
            "CHASM_FDR": "0.05",
            "CHASM_PVALUE": "0.0004",
            "CHROM": "chr17",
            "COSMIC_ID": "COSM3755564",
            "DP": "2",
            "GENE": "BRCA1",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "43092919",
            "QUAL": "39.74",
            "REF": "G",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "prostate",
            "TUMOR": "carcinoma_--_NS",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.33539"
        },
        {
            "ALT": "T",
            "CHASM_FDR": "0.05",
            "CHASM_PVALUE": "0.0014",
            "CHROM": "chr17",
            "COSMIC_ID": "COSM4989394",
            "DP": "11",
            "GENE": "BRCA1",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "43093454",
            "QUAL": "425.77",
            "REF": "C",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "soft_tissue",
            "TUMOR": "rhabdomyosarcoma_--_embryonal",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.51068"
        },
        {
            "ALT": "C",
            "CHASM_FDR": "0.05",
            "CHASM_PVALUE": "0.0004",
            "CHROM": "chr19",
            "COSMIC_ID": "NA",
            "DP": "107",
            "GENE": "PAK4",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "39177761",
            "QUAL": "1232.77",
            "REF": "G",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "NA",
            "TUMOR": "NA",
            "VEST_FDR": "0.3",
            "VEST_PVALUE": "0.01093"
        },
        {
            "ALT": "C",
            "CHASM_FDR": "0.3",
            "CHASM_PVALUE": "0.093",
            "CHROM": "chr19",
            "COSMIC_ID": "COSM3721172",
            "DP": "12",
            "GENE": "CCDC9",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "47271515",
            "QUAL": "321.77",
            "REF": "T",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "haematopoietic_and_lymphoid_tissue",
            "TUMOR": "haematopoietic_neoplasm_--_acute_myeloid_leukaemia",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.97622"
        },
        {
            "ALT": "T",
            "CHASM_FDR": "0.3",
            "CHASM_PVALUE": "0.0834",
            "CHROM": "chr20",
            "COSMIC_ID": "COSM3758608",
            "DP": "26",
            "GENE": "TP53RK",
            "KGPROD": "NA",
            "MQ": "60",
            "NSF": "NA",
            "NSM": "NA",
            "NSN": "NA",
            "PMC": "NA",
            "POS": "46687147",
            "QUAL": "453.77",
            "REF": "C",
            "RS": "NA",
            "SAO": "NA",
            "TISSUE": "pancreas",
            "TUMOR": "carcinoma_--_ductal_carcinoma",
            "VEST_FDR": "1",
            "VEST_PVALUE": "0.88584"
        }
    ]


    document.addEventListener("DOMContentLoaded", function () {

        initTabs();

        initIGV();

        initTable();


    });


    function initTabs() {

        var tabs = [];

        // Grab the tab links and content divs from the page
        var liItems = Array.from(document.getElementById('tabs').childNodes).filter(function (item) {
            return item.nodeName === 'LI'
        });

        var tabLinks = liItems.map(function (li) {
            return getFirstChildWithTagName(li, 'A');
        })

        tabLinks.forEach(function (tabLink) {
            tabLink.onclick = showTab;
            tabLink.onfocus = function () {
                this.blur()
            };
            var id = getHash(tabLink.getAttribute('href'));
            var contentDiv = document.getElementById(id);
            tabs.push({
                id: id,
                link: tabLink,
                content: contentDiv
            });
        })

        tabs[1].content.className = 'tabContent';
        tabs[1].link.className = 'selected';
        for (var i = 0; i < 1; i++) {
            tabs[i].link.className = '';
            tabs[i].content.className = 'tabContent hide'
        }

        function showTab() {

            var selectedId = getHash(this.getAttribute('href'));

            tabs.forEach(function (tab) {

                if (tab.id == selectedId) {
                    tab.link.className = 'selected';
                    tab.content.className = 'tabContent';
                } else {
                    tab.link.className = '';
                    tab.content.className = 'tabContent hide';
                }
            });

            igv.visibilityChange();

            // Stop the browser following the link
            return false;
        }


        function getFirstChildWithTagName(element, tagName) {
            for (var i = 0; i < element.childNodes.length; i++) {
                if (element.childNodes[i].nodeName == tagName) return element.childNodes[i];
            }
        }

        function getHash(url) {
            var hashPos = url.lastIndexOf('#');
            return url.substring(hashPos + 1);
        }
    }

    function initIGV() {

        var igvDiv, options;
        igvDiv = document.getElementById("igvDiv");
        options =
            {
                reference: {"fastaURL": "data:application/gzip;base64,H4sIAJH/5VsC/71SOW7DMBDs84o8QkbcJPBiCn5gPiCwUGqH/0d2ZkkpdYCEhCxyuZxL/uifz9vr42vsz/G+vW3b/f6CliN+TOhBtEb61+usrQaopWYW4TpAt7hD9zkPBE5W39XxhwT/6uL3KCgcoBbQAYKtZoLwpJrdWiVPGqmj3FDQesRjLtmEr9O8XLIMFI5CeOGKbk+dtOAwYrNgaauthYeQTYkl2u6xJIalVEEsBpmxWzNRMeRAuJwiU1FQns4vU1ACkB2jcuYn5sCiayttlI1KxPFLiN1RWaZVx16nrdK4KrOx/iaXdfuUUHmgiLwTmdVLmheMqFxaXZIlZcN5xXrgl9jLw5mjQ7RLKGkJJity4UvVMhPRZppwSwSmlljycvTe9+MYfo0jX314u+/fCVj14v4DAAA="}


            };
        igv.createBrowser(igvDiv, options);
    }

    function initTable() {
        var table = document.createElement("table");

        table.style.width = "100%";

        document.getElementById("tableSelectorDiv").appendChild(table);

        var thead = document.createElement('thead');
        table.appendChild(thead);
        var headerRow = thead.insertRow(0);

        // Assume all json objects have the same keys
        var headers = Object.keys(tableJson[0]);

        for (var j = 0; j < headers.length; j++) {
            var cell = document.createElement("th");
            headerRow.appendChild(cell);
            cell.innerHTML = headers[j];

        }

        var tbody = document.createElement('tbody');
        table.appendChild(tbody);

        for (var i = 0; i < tableJson.length; i++) {

            var json = tableJson[i];

            var row = document.createElement("tr");
            row.id = "row_" + i;
            tbody.appendChild(row);

            row.onclick = function (event) {

                console.log(event.target.parentElement.id);
            }

            for (j = 0; j < headers.length; j++) {
                var key = headers[j];
                var value = json[key];

                cell = document.createElement("td");
                cell.rowID = i;
                row.appendChild(cell);
                cell.innerHTML = value;
            }

        }
    }


</script>


</body>