<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Table example</title>


</head>
<body>

<button id="showTableButton">Show Table</button>

<div id='igv-container' style="padding-top: 50px;padding-bottom: 20px; height: auto">

</div>

<script type="module">

    import igv from '../../js/index.js'
    import BLATTable from '../../js/ui/BLATTable.js'

    const tableData =
        {
         headers: ["chr", "start", "end", "strand", "score", "match", "mis-match", "rep. match", "N's", "Q gap count", "Q gap bases", "T gap count", "T gap bases"],
        rows: [
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
            ["chr8", "128747591", "128749088", "+", "1000", "1477", "0", "0", "0", "0", "0", "0", "0"],
            ["chr1", "6291474", "6535355", "+", "28", "46", "0", "0", "0", "1", "111", "2", "243835"],
        ],
        rowClickHandler: (rowData) => {
            console.log(`${rowData[0]}:${parseInt(rowData[1]) - 1}-${rowData[2]}`)
        }
    };

    const options =
        {
            genome: 'hg19',
            locus: 'myc',
        };
    igv.createBrowser(document.getElementById('igv-container'), options)
        .then(browser => {

            const config =
                {
                    browser,
                    columnFormat: tableData.headers.slice(),
                    parent: document.getElementById('igv-container'),
                    headerTitle: 'BLAT Results',
                    dismissHandler: () => blatTable.dismiss()
                }

            const blatTable = new BLATTable(config)

            document.getElementById('showTableButton').addEventListener('click', () => {
                blatTable.renderTable(tableData.rows)
                blatTable.present()
            })
        })



</script>

</body>
</html>
