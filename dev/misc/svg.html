<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>SVG demo</title>


</head>

<body>

<div id="igv-centering-container">
    <div id='igv-app-container'></div>
</div>

<div id='igv-draw-svg-button-container'>
    <button id='igv-draw-svg-button' type="button">
        <label>Draw SVG</label>
    </button>
</div>

<div id="igv-svg-container">
</div>

</body>

<script type="module">

    import $ from '../../js/vendor/jquery-3.3.1.slim.js'
    import igv from '../../js/index.js'

    (async () => {

        const bedgraph_options = {
            locus: '19:49301000-49305700',
            genome: "hg19",
            tracks: [
                {
                    name: 'All negative points',
                    url: '../../test/data/wig/allNegativewig.bedgraph',
                    indexed: false,
                    graphType: "points",
                    guideLines:
                        [
                            {dotted: true, y: 0, color: "green"},
                            {dotted: true, y: -0.25, color: "blue"},
                            {dotted: true, y: -0.5, color: "red"}
                        ]
                },
                {
                    name: 'All negative bars',
                    url: '../../test/data/wig/allNegativewig.bedgraph',
                    indexed: false
                },
                {
                    name: 'Mixed_pos_neg_points',
                    url: '../../test/data/wig/mixedPosNeg.bedgraph',
                    indexed: false,
                    graphType: "points",
                    guideLines:
                        [
                            {dotted: true, y: 0, color: "green"},
                            {dotted: true, y: -0.5, color: "blue"},
                            {dotted: true, y: 0.5, color: "red"}
                        ]
                },
                {
                    name: 'Mixed pos neg bars',
                    url: '../../test/data/wig/mixedPosNeg.bedgraph',
                    indexed: false
                },
                {
                    name: 'All pos points',
                    url: '../../test/data/wig/allPositive.bedgraph',
                    indexed: false,
                    graphType: "points",
                    guideLines:
                        [
                            {dotted: true, y: 0, color: "green"},
                            {dotted: true, y: 0.25, color: "blue"},
                            {dotted: true, y: 0.5, color: "red"}
                        ]
                },
                {
                    name: 'All pos bars',
                    url: '../../test/data/wig/allPositive.bedgraph',
                    indexed: false
                }
            ]
        };

        const browser = await igv.createBrowser(document.getElementById('igv-app-container'), bedgraph_options)

        // $('#igv-draw-svg-button').on('click', () => browser.renderSVG($('#igv-svg-container')))
        $('#igv-draw-svg-button').on('click', () => browser.saveSVGtoFile({ $container: $('#igv-svg-container') }))


    })()

</script>
</html>
