<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <title>PNG Output Demo</title>


</head>

<body>

<div>
    <div id='app-container'></div>
</div>

<div>
    <button id='igv-save-as-png-button' type="button">
        <label>Save As PNG</label>
    </button>
</div>

<div id="igv-svg-container">
</div>

</body>

<script type="module">

    // import igv from '../../js/index.js'
    import igv from '../../dist/igv.esm.js'

    const bedgraph_options = {
        locus: '19:49301000-49305700',
        genome: "hg19",
        tracks: [
            {
                name: 'All negative points',
                url: '../../test/data/wig/allNegativewig.bedgraph',
                indexed: false,
                graphType: "points",
                guideLines:
                    [
                        {dotted: true, y: 0, color: "green"},
                        {dotted: true, y: -0.25, color: "blue"},
                        {dotted: true, y: -0.5, color: "red"}
                    ]
            },
            {
                name: 'All negative bars',
                url: '../../test/data/wig/allNegativewig.bedgraph',
                indexed: false
            },
            {
                name: 'Mixed_pos_neg_points',
                url: '../../test/data/wig/mixedPosNeg.bedgraph',
                indexed: false,
                graphType: "points",
                guideLines:
                    [
                        {dotted: true, y: 0, color: "green"},
                        {dotted: true, y: -0.5, color: "blue"},
                        {dotted: true, y: 0.5, color: "red"}
                    ]
            },
            {
                name: 'Mixed pos neg bars',
                url: '../../test/data/wig/mixedPosNeg.bedgraph',
                indexed: false
            },
            {
                name: 'All pos points',
                url: '../../test/data/wig/allPositive.bedgraph',
                indexed: false,
                graphType: "points",
                guideLines:
                    [
                        {dotted: true, y: 0, color: "green"},
                        {dotted: true, y: 0.25, color: "blue"},
                        {dotted: true, y: 0.5, color: "red"}
                    ]
            },
            {
                name: 'All pos bars',
                url: '../../test/data/wig/allPositive.bedgraph',
                indexed: false
            }
        ]
    };


    igv.createBrowser(document.getElementById('app-container'), bedgraph_options)
        .then(browser => {
            console.log(`${ browser.guid } is good to go`)

            document.querySelector('#igv-save-as-png-button').addEventListener('click', () => {
                browser.savePNGtoFile(`igvjs-screendump-${ browser.guid }.png`)
            })

        })

</script>
</html>
