<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Seg Big</title>

</head>

<body>

<h1>Shoebox</h1>

<button id="log-state">Log Session</button>
<button id="bookmark">Bookmark</button>

<div id="igvDiv" style="padding-top: 50px;padding-bottom: 20px; height: auto"></div>

<script type="module">

    import igv from "../../js/index.js"

    const options =
        {
            queryParametersSupported: true,
            "genome": "hg38",
            "locus": "chr6:152,982,998-152,983,790",
            "tracks": [
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/NK.bed.gz",
                    "filename": "NK.bed.gz",
                    "indexURL": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/NK.bed.gz.tbi",
                    "name": "NK",
                    "order": -9,
                    "format": "bed",
                    "type": "shoebox",
                    "color": "rgb(137, 30, 136)",
                    "min": 0.5,
                    "max": 3,
                    "colorScale": {
                        "min": 0.5,
                        "max": 3,
                        "color": "rgb(137,30,136)"
                    }
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/NK_lora_TFBS.bigwig",
                    "filename": "NK_lora_TFBS.bigwig",
                    "name": "NK_lora_TFBS.bigwig",
                    "order": -8,
                    "format": "bigwig",
                    "type": "wig",
                    "color": "rgb(137, 30, 136)",
                    "colorScale": {
                        "type": "doubleGradient",
                        "low": 0,
                        "mid": 0.25,
                        "high": 0.5,
                        "lowColor": "rgb(46,56,183)",
                        "midColor": "white",
                        "highColor": "rgb(164,0,30)"
                    },
                    "graphType": "heatmap"
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/CLP.bed.gz",
                    "filename": "CLP.bed.gz",
                    "indexURL": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/CLP.bed.gz.tbi",
                    "name": "CLP",
                    "order": -7,
                    "format": "bed",
                    "type": "shoebox",
                    "color": "rgb(106, 207, 255)",
                    "min": 0.5,
                    "max": 3,
                    "colorScale": {
                        "min": 0.5,
                        "max": 3,
                        "color": "rgb(106,207,255)"
                    }
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/CLP_lora_TFBS.bigwig",
                    "filename": "CLP_lora_TFBS.bigwig",
                    "name": "CLP_lora_TFBS.bigwig",
                    "order": -6,
                    "format": "bigwig",
                    "type": "wig",
                    "color": "rgb(106, 207, 255)",
                    "colorScale": {
                        "type": "doubleGradient",
                        "low": 0,
                        "mid": 0.25,
                        "high": 0.5,
                        "lowColor": "rgb(46,56,183)",
                        "midColor": "white",
                        "highColor": "rgb(164,0,30)"
                    },
                    "graphType": "heatmap"
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/late-Ery.bed.gz",
                    "filename": "late-Ery.bed.gz",
                    "indexURL": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/late-Ery.bed.gz.tbi",
                    "name": "late-Ery",
                    "order": -5,
                    "format": "bed",
                    "type": "shoebox",
                    "color": "rgb(137, 17, 0)",
                    "min": 0.5,
                    "max": 3,
                    "colorScale": {
                        "min": 0.5,
                        "max": 3,
                        "color": "rgb(137,17,0)"
                    }
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/late-Ery_lora_TFBS.bigwig",
                    "filename": "late-Ery_lora_TFBS.bigwig",
                    "name": "late-Ery_lora_TFBS.bigwig",
                    "order": -4,
                    "format": "bigwig",
                    "type": "wig",
                    "color": "rgb(137, 17, 0)",
                    "colorScale": {
                        "type": "doubleGradient",
                        "low": 0,
                        "mid": 0.25,
                        "high": 0.5,
                        "lowColor": "rgb(46,56,183)",
                        "midColor": "white",
                        "highColor": "rgb(164,0,30)"
                    },
                    "graphType": "heatmap"
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/CD16mono.bed.gz",
                    "filename": "CD16mono.bed.gz",
                    "indexURL": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/CD16mono.bed.gz.tbi",
                    "name": "CD16mono",
                    "order": -3,
                    "format": "bed",
                    "type": "shoebox",
                    "color": "rgb(255, 136, 2)",
                    "min": 0.5,
                    "max": 3,
                    "colorScale": {
                        "min": 0.5,
                        "max": 3,
                        "color": "rgb(255,136,2)"
                    }
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/CD16mono_lora_TFBS.bigwig",
                    "filename": "CD16mono_lora_TFBS.bigwig",
                    "name": "CD16mono_lora_TFBS.bigwig",
                    "order": -2,
                    "format": "bigwig",
                    "type": "wig",
                    "color": "rgb(255, 136, 2)",
                    "colorScale": {
                        "type": "doubleGradient",
                        "low": 0,
                        "mid": 0.25,
                        "high": 0.5,
                        "lowColor": "rgb(46,56,183)",
                        "midColor": "white",
                        "highColor": "rgb(164,0,30)"
                    },
                    "graphType": "heatmap"
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/NaiveB.bed.gz",
                    "filename": "NaiveB.bed.gz",
                    "indexURL": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/NaiveB.bed.gz.tbi",
                    "name": "NaiveB",
                    "order": -1,
                    "format": "bed",
                    "type": "shoebox",
                    "color": "rgb(210, 120, 255)",
                    "min": 0.5,
                    "max": 3,
                    "colorScale": {
                        "min": 0.5,
                        "max": 3,
                        "color": "rgb(210,120,255)"
                    }
                },
                {
                    "url": "https://storage.googleapis.com/broad-buenrostro-pipeline-genome-annotations/neva/BMMC_roi/NaiveB_lora_TFBS.bigwig",
                    "filename": "NaiveB_lora_TFBS.bigwig",
                    "name": "NaiveB_lora_TFBS.bigwig",
                    "order": 0,
                    "format": "bigwig",
                    "type": "wig",
                    "color": "rgb(210, 120, 255)",
                    "colorScale": {
                        "type": "doubleGradient",
                        "low": 0,
                        "mid": 0.25,
                        "high": 0.5,
                        "lowColor": "rgb(46,56,183)",
                        "midColor": "white",
                        "highColor": "rgb(164,0,30)"
                    },
                    "graphType": "heatmap"
                }
            ]
        }


    var igvDiv = document.getElementById("igvDiv")

    igv.createBrowser(igvDiv, options)
        .then(function (browser) {
            console.log("Created IGV browser")
            document.getElementById("log-state").addEventListener("click", () => console.log(browser.toJSON()))

            document.getElementById('bookmark').addEventListener('click', () => {
                const path = window.location.href.slice()
                const idx = path.indexOf("?")
                const url = (idx > 0 ? path.substring(0, idx) : path) + "?sessionURL=blob:" + browser.compressedSession()
                window.history.pushState({}, "IGV", url)
            })

        })


</script>

</body>

</html>
</title>
</head>
<body>

</body>
</html>
